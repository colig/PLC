{"ast":null,"code":"import _classCallCheck from \"/Users/wchen/Dropbox/UMN/2019_Spring/PLB_Capstone/PLC/PLC/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wchen/Dropbox/UMN/2019_Spring/PLB_Capstone/PLC/PLC/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wchen/Dropbox/UMN/2019_Spring/PLB_Capstone/PLC/PLC/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wchen/Dropbox/UMN/2019_Spring/PLB_Capstone/PLC/PLC/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wchen/Dropbox/UMN/2019_Spring/PLB_Capstone/PLC/PLC/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/wchen/Dropbox/UMN/2019_Spring/PLB_Capstone/PLC/PLC/src/components/Sidebar.js\";\nimport \"../css/Sidebar.css\";\nimport React from \"react\";\nimport { Menu } from \"semantic-ui-react\";\n\nvar AnnotSidebar =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AnnotSidebar, _React$Component);\n\n  function AnnotSidebar() {\n    _classCallCheck(this, AnnotSidebar);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(AnnotSidebar).apply(this, arguments));\n  }\n\n  _createClass(AnnotSidebar, [{\n    key: \"renderTags\",\n    value: function renderTags() {\n      var annotData = this.props.fullAnnots.annotData;\n\n      if (annotData.user) {\n        return this.props.fullAnnots.annotData.tags.map(function (tag) {\n          return React.createElement(\"div\", {\n            className: \"ui horizontal list\",\n            key: tag,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 11\n            },\n            __self: this\n          }, React.createElement(\"p\", {\n            className: \"item tag-item annot-tag\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 12\n            },\n            __self: this\n          }, tag));\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var annotData = this.props.fullAnnots.annotData;\n      console.log(\"sidebar data\", annotData); // const newData = annotData;\n      // test test\n      // for (var i = 0; i < newData.length; i++) {\n      //   var urls = /(\\b(https?|ftp):\\/\\/[A-Z0-9+&@#\\/%?=~_|!:,.;-]*[-A-Z0-9+&@#\\/%=~_|])/gim;\n      //   var imgs = /(https?:\\/\\/.*\\.(?:jpeg|jpg|png|gif))/i;\n      //   if (newData[i].text.match(urls) && !newData[i].text.match(imgs)) {\n      //     console.log(\"Hi! Hi!!\");\n      //     if (annotData[i].text.includes(\"a href\")) {\n      //       annotData[i].text = annotData[i].text.replace(\n      //         /<a href=/gi,\n      //         '<a target=\"_blank\" href='\n      //       );\n      //     } else if (annotData[i].text.includes(\"iframe\")) {\n      //       console.log(\"iframe:\", annotData[i].text);\n      //     } else {\n      //       annotData[i].text = annotData[i].text.replace(\n      //         urls,\n      //         '<a href=\"$1\" target=\"_blank\">$1</a>'\n      //       );\n      //     }\n      //   } else if (newData[i].text.match(/\\.(jpeg|jpg|png|gif)/g)) {\n      //     console.log(\"Hi! Hi!! Hi!!!\");\n      //     var regex = /(https?:\\/\\/.*\\.(?:png|jpg))/i;\n      //     annotData[i].text = annotData[i].text\n      //       .replace(\"![]\", \"\")\n      //       .replace(/[()]/g, \"\")\n      //       .replace(\n      //         regex,\n      //         '<img src=\"$1\" width=\"50%\" style=\"margin-bottom: 2rem; margin-top: 1rem;\"></img>'\n      //       );\n      //     var nonImgUrl = /(?:^|[^\"'])((ftp|http|https|file):\\/\\/[\\S]+(\\b|$))/gim;\n      //     if (annotData[i].text.match(nonImgUrl)) {\n      //       if (annotData[i].text.includes(\"a href\")) {\n      //         annotData[i].text = annotData[i].text.replace(\n      //           nonImgUrl,\n      //           '<a target=\"_blank\" href='\n      //         );\n      //       } else if (annotData[i].text.includes(\"iframe\")) {\n      //         console.log(\"iframe:\", annotData[i].text);\n      //       } else {\n      //         annotData[i].text = annotData[i].text.replace(\n      //           nonImgUrl,\n      //           '<a href=\"$1\" target=\"_blank\">$1</a>'\n      //         );\n      //       }\n      //     }\n      //   }\n      // }\n\n      if (annotData.user) {\n        var urls = /(\\b(https?|ftp):\\/\\/[A-Z0-9+&@#\\/%?=~_|!:,.;-]*[-A-Z0-9+&@#\\/%=~_|])/gim;\n        var imgs = /(https?:\\/\\/.*\\.(?:jpeg|jpg|png|gif))/i;\n        console.log(\"annot data text\", annotData.text);\n\n        if (annotData.text.match(urls) && !annotData.text.match(imgs)) {\n          if (annotData.text.includes(\"a href\")) {\n            annotData.text = annotData.text.replace(/<a href=/gi, '<a target=\"_blank\" href=');\n          } else if (annotData.text.includes(\"iframe\")) {\n            console.log(\"iframe:\", annotData.text);\n          } else {\n            annotData.text = annotData.text.replace(urls, '<a href=\"$1\" target=\"_blank\">$1</a>');\n          }\n\n          console.log(\"come on!\");\n        } else if (annotData.text.match(/\\.(jpeg|jpg|png|gif)/g)) {\n          var regex = /(https?:\\/\\/.*\\.(?:png|jpg))/i;\n          annotData.text = annotData.text.replace(\"![]\", \"\").replace(/[()]/g, \"\").replace(regex, '<img src=\"$1\" width=\"50%\" style=\"margin-bottom: 2rem; margin-top: 1rem;\"></img>');\n          var nonImgUrl = /(?:^|[^\"'])((ftp|http|https|file):\\/\\/[\\S]+(\\b|$))/gim;\n\n          if (annotData.text.match(nonImgUrl)) {\n            if (annotData.text.includes(\"a href\")) {\n              annotData.text = annotData.text.replace(nonImgUrl, '<a target=\"_blank\" href=');\n            } else if (annotData.text.includes(\"iframe\")) {\n              console.log(\"iframe:\", annotData.text);\n            } else {\n              annotData.text = annotData.text.replace(nonImgUrl, '<a href=\"$1\" target=\"_blank\">$1</a>');\n            }\n          }\n\n          console.log(\"come on baby!\");\n        }\n\n        var user = annotData.user.substring(annotData.user.indexOf(\":\") + 1, annotData.user.indexOf(\"@\"));\n        var tags = annotData.tags.join(\" | \");\n        var link = annotData.links.incontext;\n        var userLink = \"https://hypothes.is/users/\" + user;\n        var time = annotData.created.substring(0, annotData.created.indexOf(\"T\"));\n\n        if (annotData.target[0].selector !== undefined) {\n          var seleLength = annotData.target[0].selector.length;\n          var realIndex = seleLength - 1;\n          var target = annotData.target[0].selector[realIndex].exact;\n        } else {\n          var target = \"\";\n        }\n      }\n\n      return React.createElement(\"div\", {\n        className: \"sidebar-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(Menu.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ui\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"basic-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"user-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"user icon lar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"user-name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"Annotator: \"), \" \", React.createElement(\"a\", {\n        href: userLink,\n        target: \"_blank\",\n        className: \"user-link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, user)), React.createElement(\"p\", {\n        className: \"annot-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"linkify icon mid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }), React.createElement(\"a\", {\n        href: link,\n        target: \"_blank\",\n        className: \"context-link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"Visit annotation in context\")), React.createElement(\"p\", {\n        className: \"annot-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"tag icon mid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }), \"Tags\"), React.createElement(\"p\", {\n        className: \"tag-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, tags)))), React.createElement(Menu.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"full-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"time-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"public\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, \"Public\"), React.createElement(\"p\", {\n        className: \"create-time\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, time)), React.createElement(\"p\", {\n        className: \"target-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, target), React.createElement(\"p\", {\n        className: \"text-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, annotData.text), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, annotData.text), React.createElement(\"img\", {\n        src: annotData.text,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, this.renderTags()))));\n    }\n  }]);\n\n  return AnnotSidebar;\n}(React.Component);\n\nexport default AnnotSidebar;","map":{"version":3,"sources":["/Users/wchen/Dropbox/UMN/2019_Spring/PLB_Capstone/PLC/PLC/src/components/Sidebar.js"],"names":["React","Menu","AnnotSidebar","annotData","props","fullAnnots","user","tags","map","tag","console","log","urls","imgs","text","match","includes","replace","regex","nonImgUrl","substring","indexOf","join","link","links","incontext","userLink","time","created","target","selector","undefined","seleLength","length","realIndex","exact","renderTags","Component"],"mappings":"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","sourcesContent":["import \"../css/Sidebar.css\";\nimport React from \"react\";\nimport { Menu } from \"semantic-ui-react\";\n\nclass AnnotSidebar extends React.Component {\n  renderTags() {\n    const annotData = this.props.fullAnnots.annotData;\n    if (annotData.user) {\n      return this.props.fullAnnots.annotData.tags.map(tag => {\n        return (\n          <div className=\"ui horizontal list\" key={tag}>\n            <p className=\"item tag-item annot-tag\">{tag}</p>\n          </div>\n        );\n      });\n    }\n  }\n\n  render() {\n    const annotData = this.props.fullAnnots.annotData;\n    console.log(\"sidebar data\", annotData);\n\n    // const newData = annotData;\n    // test test\n    // for (var i = 0; i < newData.length; i++) {\n    //   var urls = /(\\b(https?|ftp):\\/\\/[A-Z0-9+&@#\\/%?=~_|!:,.;-]*[-A-Z0-9+&@#\\/%=~_|])/gim;\n    //   var imgs = /(https?:\\/\\/.*\\.(?:jpeg|jpg|png|gif))/i;\n\n    //   if (newData[i].text.match(urls) && !newData[i].text.match(imgs)) {\n    //     console.log(\"Hi! Hi!!\");\n\n    //     if (annotData[i].text.includes(\"a href\")) {\n    //       annotData[i].text = annotData[i].text.replace(\n    //         /<a href=/gi,\n    //         '<a target=\"_blank\" href='\n    //       );\n    //     } else if (annotData[i].text.includes(\"iframe\")) {\n    //       console.log(\"iframe:\", annotData[i].text);\n    //     } else {\n    //       annotData[i].text = annotData[i].text.replace(\n    //         urls,\n    //         '<a href=\"$1\" target=\"_blank\">$1</a>'\n    //       );\n    //     }\n    //   } else if (newData[i].text.match(/\\.(jpeg|jpg|png|gif)/g)) {\n    //     console.log(\"Hi! Hi!! Hi!!!\");\n    //     var regex = /(https?:\\/\\/.*\\.(?:png|jpg))/i;\n    //     annotData[i].text = annotData[i].text\n    //       .replace(\"![]\", \"\")\n    //       .replace(/[()]/g, \"\")\n    //       .replace(\n    //         regex,\n    //         '<img src=\"$1\" width=\"50%\" style=\"margin-bottom: 2rem; margin-top: 1rem;\"></img>'\n    //       );\n    //     var nonImgUrl = /(?:^|[^\"'])((ftp|http|https|file):\\/\\/[\\S]+(\\b|$))/gim;\n    //     if (annotData[i].text.match(nonImgUrl)) {\n    //       if (annotData[i].text.includes(\"a href\")) {\n    //         annotData[i].text = annotData[i].text.replace(\n    //           nonImgUrl,\n    //           '<a target=\"_blank\" href='\n    //         );\n    //       } else if (annotData[i].text.includes(\"iframe\")) {\n    //         console.log(\"iframe:\", annotData[i].text);\n    //       } else {\n    //         annotData[i].text = annotData[i].text.replace(\n    //           nonImgUrl,\n    //           '<a href=\"$1\" target=\"_blank\">$1</a>'\n    //         );\n    //       }\n    //     }\n    //   }\n    // }\n\n    if (annotData.user) {\n      var urls = /(\\b(https?|ftp):\\/\\/[A-Z0-9+&@#\\/%?=~_|!:,.;-]*[-A-Z0-9+&@#\\/%=~_|])/gim;\n      var imgs = /(https?:\\/\\/.*\\.(?:jpeg|jpg|png|gif))/i;\n      console.log(\"annot data text\", annotData.text);\n\n      if (annotData.text.match(urls) && !annotData.text.match(imgs)) {\n        if (annotData.text.includes(\"a href\")) {\n          annotData.text = annotData.text.replace(\n            /<a href=/gi,\n            '<a target=\"_blank\" href='\n          );\n        } else if (annotData.text.includes(\"iframe\")) {\n          console.log(\"iframe:\", annotData.text);\n        } else {\n          annotData.text = annotData.text.replace(\n            urls,\n            '<a href=\"$1\" target=\"_blank\">$1</a>'\n          );\n        }\n        console.log(\"come on!\");\n      } else if (annotData.text.match(/\\.(jpeg|jpg|png|gif)/g)) {\n        var regex = /(https?:\\/\\/.*\\.(?:png|jpg))/i;\n        annotData.text = annotData.text\n          .replace(\"![]\", \"\")\n          .replace(/[()]/g, \"\")\n          .replace(\n            regex,\n            '<img src=\"$1\" width=\"50%\" style=\"margin-bottom: 2rem; margin-top: 1rem;\"></img>'\n          );\n        var nonImgUrl = /(?:^|[^\"'])((ftp|http|https|file):\\/\\/[\\S]+(\\b|$))/gim;\n        if (annotData.text.match(nonImgUrl)) {\n          if (annotData.text.includes(\"a href\")) {\n            annotData.text = annotData.text.replace(\n              nonImgUrl,\n              '<a target=\"_blank\" href='\n            );\n          } else if (annotData.text.includes(\"iframe\")) {\n            console.log(\"iframe:\", annotData.text);\n          } else {\n            annotData.text = annotData.text.replace(\n              nonImgUrl,\n              '<a href=\"$1\" target=\"_blank\">$1</a>'\n            );\n          }\n        }\n\n        console.log(\"come on baby!\");\n      }\n\n      var user = annotData.user.substring(\n        annotData.user.indexOf(\":\") + 1,\n        annotData.user.indexOf(\"@\")\n      );\n      var tags = annotData.tags.join(\" | \");\n      var link = annotData.links.incontext;\n      var userLink = \"https://hypothes.is/users/\" + user;\n      var time = annotData.created.substring(0, annotData.created.indexOf(\"T\"));\n      if (annotData.target[0].selector !== undefined) {\n        const seleLength = annotData.target[0].selector.length;\n        const realIndex = seleLength - 1;\n        var target = annotData.target[0].selector[realIndex].exact;\n      } else {\n        var target = \"\";\n      }\n    }\n\n    return (\n      <div className=\"sidebar-content\">\n        <Menu.Item>\n          <div className=\"ui\">\n            <div className=\"basic-info\">\n              <p className=\"user-info\">\n                <i className=\"user icon lar\" />\n                <span className=\"user-name\">Annotator: </span>{\" \"}\n                <a href={userLink} target=\"_blank\" className=\"user-link\">\n                  {user}\n                </a>\n              </p>\n              <p className=\"annot-info\">\n                <i className=\"linkify icon mid\" />\n                <a href={link} target=\"_blank\" className=\"context-link\">\n                  Visit annotation in context\n                </a>\n              </p>\n              <p className=\"annot-info\">\n                <i className=\"tag icon mid\" />\n                Tags\n              </p>\n              <p className=\"tag-info\">{tags}</p>\n            </div>\n          </div>\n        </Menu.Item>\n\n        <Menu.Item>\n          <div className=\"full-info\">\n            <div className=\"time-info\">\n              <p className=\"public\">Public</p>\n              <p className=\"create-time\">{time}</p>\n            </div>\n            <p className=\"target-info\">{target}</p>\n            <p className=\"text-info\">{annotData.text}</p>\n            <div>{annotData.text}</div>\n            <img src={annotData.text} />\n\n            <div>{this.renderTags()}</div>\n          </div>\n        </Menu.Item>\n      </div>\n    );\n  }\n}\n\nexport default AnnotSidebar;\n"]},"metadata":{},"sourceType":"module"}